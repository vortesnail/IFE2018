
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <!--link rel="stylesheet" href="style.css" type="text/css">-->
  <title>透明度</title>
  <style >
    
  
  </style>

</head>
<body>
  <div id="fade-obj" style="width:300px;height:300px;background:#000"></div>
  <button id="fade-btn">淡出</button>

  <script>
    var fadeObj = document.getElementById("fade-obj");
    var fadeBtn = document.getElementById("fade-btn");
    var opacityNum = 1; //默认值透明度为1

    fadeBtn.onclick = function(){
      fadeBtn.disabled = true;        
      if(opacityNum >= 1){
        opacityToZero();
      }else{
        opacityToOne();
      }
    }

    function opacityToZero(){
      fadeObj.style.opacity = opacityNum;
      opacityNum -= 0.05;
      console.log(opacityNum + "opacityToZero");
      if(opacityNum >= -1){
        var ani = setTimeout("opacityToZero()", 5);
        if(opacityNum <= 0){
          fadeBtn.disabled = false;
          fadeBtn.innerHTML = "淡入";
        }
      }
    }

    function opacityToOne(){
      fadeObj.style.opacity = opacityNum;
      opacityNum += 0.05;
      console.log(opacityNum + "opacityToOne");
      if(opacityNum <= 1.1){
        var ani = setTimeout("opacityToOne()", 5);
        if(opacityNum >= 1){
          fadeBtn.disabled = false;
          fadeBtn.innerHTML = "淡出";
        }
      }
    }
  
  </script>
</body>
</html>